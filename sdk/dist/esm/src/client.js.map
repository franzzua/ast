{"version":3,"sources":["../../../src/client.ts"],"names":["WOQLClient","DataNode","swcSchema","randomBytes","schemaMap","Map","map","x","Client","client","user","key","db","init","dbs","getDatabases","some","label","deleteDatabase","createDatabase","public","addDocument","values","graph_type","full_replace","e","update","node","from","updateDocument","add","program","fileName","converted","convert","errors","error","data","push","JSON","stringify","Error","join","parent","type","parentSchema","getSchema","res","toString","schema","value","Array","isArray","schemaKey","startsWith","convertBack","includes","getNode","i","length","nodeType","get","result","Object","assign","baseSchema","getLastCommitDiff","current","last","getCommitsLog","diff","getVersionDiff","substr","getModule","id","tryCount","cache","getDocument","query","split","skipped","Set"],"mappings":"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"}